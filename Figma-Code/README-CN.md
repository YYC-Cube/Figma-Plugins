# PostgreSQL ä»£ç ç”Ÿæˆå™¨

> ***YanYuCloudCube***
> è¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> ä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

> ä» Figma è®¾è®¡ç”Ÿæˆ SQLã€ORM å’Œ API ä»£ç 

## æ¦‚è¿°

PostgreSQL ä»£ç ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ª Figma æ’ä»¶ï¼Œå¯å°†æ•°æ®åº“è®¾è®¡è½¬æ¢ä¸ºç”Ÿäº§å°±ç»ªçš„ä»£ç ã€‚ç›´æ¥ä»æ‚¨çš„ Figma è®¾è®¡ç”Ÿæˆ PostgreSQL SQL è„šæœ¬ã€ORM æ¨¡å‹ï¼ˆPrismaã€TypeORMã€Sequelizeã€Drizzleï¼‰å’Œ REST API è·¯ç”±ï¼ˆExpressã€Fastifyã€NestJSã€Next.jsã€Honoï¼‰ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ—„ï¸ SQL ç”Ÿæˆ
- ç”Ÿæˆ PostgreSQL DDL/SQL è„šæœ¬
- æ”¯æŒæ‰€æœ‰ PostgreSQL æ•°æ®ç±»å‹
- è‡ªåŠ¨çº¦æŸç”Ÿæˆ
- ç´¢å¼•å’Œå¤–é”®åˆ›å»º
- è¿ç§»å°±ç»ªçš„è„šæœ¬

### ğŸ“¦ ORM æ”¯æŒ
- **Prisma**ï¼šå…·æœ‰ç±»å‹å®‰å…¨æ€§çš„ç°ä»£ TypeScript ORM
- **TypeORM**ï¼šåŠŸèƒ½ä¸°å¯Œçš„ TypeScript å’Œ JavaScript ORM
- **Sequelize**ï¼šåŸºäº Promise çš„ Node.js ORM
- **Drizzle**ï¼šè½»é‡çº§ã€ç±»å‹å®‰å…¨çš„ SQL å·¥å…·åŒ…

### ğŸš€ API ç”Ÿæˆ
- **Express**ï¼šæç®€ä¸»ä¹‰ Web æ¡†æ¶
- **Fastify**ï¼šé«˜æ€§èƒ½ Web æ¡†æ¶
- **NestJS**ï¼šæ¸è¿›å¼ Node.js æ¡†æ¶
- **Next.js**ï¼šå¸¦æœ‰ API è·¯ç”±çš„ React æ¡†æ¶
- **Hono**ï¼šè¶…å¿«é€Ÿ Web æ¡†æ¶

### âš™ï¸ é…ç½®
- å¯è‡ªå®šä¹‰çš„ä»£ç ç”Ÿæˆé€‰é¡¹
- å…³ç³»ç”Ÿæˆæ§åˆ¶
- éªŒè¯æ¨¡å¼ç”Ÿæˆ
- ç±»å‹å®šä¹‰å¯¼å‡º

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

1. å…‹éš†ä»“åº“ï¼š
```bash
git clone https://github.com/your-org/figma-postgres.git
cd figma-postgres-Code
```

2. å®‰è£…ä¾èµ–ï¼š
```bash
npm install
```

3. æ„å»ºå…±äº«åº“ï¼š
```bash
cd ../figma-postgres-shared
npm install
npm run build
```

4. æ„å»ºæ’ä»¶ï¼š
```bash
cd ../figma-postgres-Code
npm run build
```

### ä½¿ç”¨æ–¹æ³•

1. **åœ¨ Figma ä¸­æ‰“å¼€**ï¼šåœ¨ Figma ä¸­åŠ è½½æ’ä»¶
2. **é€‰æ‹©è®¾è®¡å…ƒç´ **ï¼šé€‰æ‹©ä»£è¡¨æ•°æ®åº“è¡¨çš„ç»„ä»¶
3. **é€‰æ‹©è¯­è¨€**ï¼šä»ä»£ç ç”Ÿæˆé¢æ¿ä¸­é€‰æ‹©æ‰€éœ€çš„è¾“å‡ºè¯­è¨€
4. **ç”Ÿæˆä»£ç **ï¼šæ’ä»¶æ ¹æ®æ‚¨çš„é€‰æ‹©è‡ªåŠ¨ç”Ÿæˆä»£ç 

## æ”¯æŒçš„è¯­è¨€

### SQL å˜ä½“
- PostgreSQL SQLï¼ˆé»˜è®¤ï¼‰
- MySQL SQLï¼ˆè®¡åˆ’ä¸­ï¼‰
- SQLite SQLï¼ˆè®¡åˆ’ä¸­ï¼‰

### ORM æ¡†æ¶
- Prisma
- TypeORM
- Sequelize
- Drizzle

### API æ¡†æ¶
- Express
- Fastify
- NestJS
- Next.js
- Hono

## ä»£ç ç”Ÿæˆç¤ºä¾‹

### PostgreSQL SQL

```sql
-- è¡¨ï¼šusers
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  username VARCHAR(50) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç´¢å¼•
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_username ON users(username);
```

### Prisma ORM

```prisma
model User {
  id          Int      @id @default(autoincrement())
  email       String   @unique
  username    String   @unique
  passwordHash String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

### TypeORM

```typescript
import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn } from 'typeorm';

@Entity('users')
export class User {
  @PrimaryGeneratedColumn()
  id: number;

  @Column({ unique: true })
  email: string;

  @Column({ unique: true })
  username: string;

  @Column()
  passwordHash: string;

  @CreateDateColumn({ name: 'created_at' })
  createdAt: Date;

  @UpdateDateColumn({ name: 'updated_at' })
  updatedAt: Date;
}
```

### Express API

```typescript
import express from 'express';
import { body, validationResult } from 'express-validator';

const router = express.Router();

// GET /users
router.get('/users', async (req, res) => {
  const users = await db.query('SELECT * FROM users');
  res.json(users);
});

// POST /users
router.post('/users', [
  body('email').isEmail(),
  body('username').isLength({ min: 3 }),
  body('password').isLength({ min: 8 })
], async (req, res) => {
  const errors = validationResult(req);
  if (!errors.isEmpty()) {
    return res.status(400).json({ errors: errors.array() });
  }

  const user = await db.query(
    'INSERT INTO users (email, username, password_hash) VALUES ($1, $2, $3) RETURNING *',
    [req.body.email, req.body.username, await hashPassword(req.body.password)]
  );
  
  res.status(201).json(user[0]);
});

export default router;
```

## é…ç½®

### ä»£ç ç”Ÿæˆé…ç½®

```typescript
{
  codegen: {
    defaultORM: 'prisma',
    defaultFramework: 'express',
    generateRelations: true,
    generateValidation: true,
    generateTypes: true
  }
}
```

### ORM ç‰¹å®šé€‰é¡¹

#### Prisma
```typescript
{
  generateRelations: true,
  generateValidation: true,
  generateTypes: true
}
```

#### TypeORM
```typescript
{
  generateRelations: true,
  generateValidation: true,
  generateTypes: true,
  useDecorators: true
}
```

#### Sequelize
```typescript
{
  generateRelations: true,
  generateValidation: true,
  generateTypes: true,
  useModelDefinition: true
}
```

### API æ¡†æ¶é€‰é¡¹

#### Express
```typescript
{
  generateCRUD: true,
  generateValidation: true,
  generateTypes: true,
  middleware: ['cors', 'helmet', 'express.json']
}
```

#### NestJS
```typescript
{
  generateCRUD: true,
  generateValidation: true,
  generateTypes: true,
  generateModules: true,
  generateServices: true,
  generateControllers: true
}
```

## è®¾è®¡çº¦å®š

### è¡¨è¡¨ç¤º
- ä½¿ç”¨ **Frame** ç»„ä»¶è¡¨ç¤ºæ•°æ®åº“è¡¨
- Frame åç§° = è¡¨åï¼ˆsnake_caseï¼‰
- å­ç»„ä»¶ = è¡¨åˆ—

### åˆ—è¡¨ç¤º
- ä½¿ç”¨ **Text** ç»„ä»¶è¡¨ç¤ºåˆ—å
- ä½¿ç”¨ç»„ä»¶åç§°æŒ‡ç¤ºæ•°æ®ç±»å‹
- æ·»åŠ çº¦æŸåç¼€ï¼š
  - `_id` = ä¸»é”®/å¤–é”®
  - `_at` = æ—¶é—´æˆ³
  - `is_` = å¸ƒå°”å€¼

### å…³ç³»æŒ‡ç¤ºå™¨
- ä½¿ç”¨ **Connection** çº¿æ˜¾ç¤ºå…³ç³»
- ä¸ºè¿æ¥çº¿æ·»åŠ æ ‡ç­¾ä»¥è¡¨ç¤ºå…³ç³»ç±»å‹ï¼š
  - `1:1` = ä¸€å¯¹ä¸€
  - `1:n` = ä¸€å¯¹å¤š
  - `n:n` = å¤šå¯¹å¤š

## ä¸å…¶ä»–æ’ä»¶é›†æˆ

### PostgreSQL è®¾è®¡å¯è§†åŒ–å™¨
- ä»å¯è§†åŒ–å™¨è§£æè®¾è®¡
- è®¿é—®ä¿å­˜çš„æ¨¡å¼
- å…±äº«é…ç½®è®¾ç½®

### PostgreSQL è®¾è®¡æ£€æŸ¥å™¨
- ä»£ç ç”Ÿæˆå‰éªŒè¯æ¨¡å¼
- æ£€æŸ¥å‘½åçº¦å®š
- éªŒè¯æ•°æ®ç±»å‹æ˜ å°„

### PostgreSQL æ•°æ®ç®¡ç†å™¨
- å¯¼å…¥ç°æœ‰æ•°æ®åº“æ¨¡å¼
- å¯¼å‡ºç”Ÿæˆçš„ä»£ç 
- ç®¡ç†æ¨¡å¼ç‰ˆæœ¬

## API å‚è€ƒ

### ä»£ç ç”Ÿæˆ

```typescript
figma.codegen.on('generate', async (event) => {
  const language = event.node.document?.codegenLanguage;
  const code = await generateCode(language, event.node);
  return [{ language, code, title: 'Generated Code' }];
});
```

### æ¨¡å¼åŠ è½½

```typescript
const schema = await PluginCommunication.loadSchema();
const code = generator.generate(schema);
```

### é…ç½®ç®¡ç†

```typescript
const config = await ConfigManager.load();
const generator = new ORMGenerator(config);
```

## æœ€ä½³å®è·µ

### è®¾è®¡é˜¶æ®µ
1. åœ¨åˆ›å»ºè®¾è®¡ä¹‹å‰è§„åˆ’æ•°æ®åº“æ¨¡å¼
2. ä½¿ç”¨ä¸€è‡´çš„å‘½åçº¦å®š
3. æ¸…æ¥šåœ°è®°å½•å…³ç³»
4. åŒ…å«æ‰€æœ‰å¿…è¦çš„çº¦æŸ

### ä»£ç ç”Ÿæˆé˜¶æ®µ
1. åœ¨ç”Ÿæˆä»£ç ä¹‹å‰éªŒè¯æ‚¨çš„æ¨¡å¼
2. æŸ¥çœ‹ç”Ÿæˆçš„ä»£ç ä»¥è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹
3. åœ¨å¼€å‘ç¯å¢ƒä¸­æµ‹è¯•ç”Ÿæˆçš„ä»£ç 
4. å¯¹ç”Ÿæˆçš„ä»£ç è¿›è¡Œç‰ˆæœ¬æ§åˆ¶

### é›†æˆé˜¶æ®µ
1. å°†ç”Ÿæˆçš„ä»£ç ä¸ç°æœ‰ä»£ç åº“é›†æˆ
2. æ·»åŠ è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘
3. å®æ–½é”™è¯¯å¤„ç†
4. æ·»åŠ æ—¥å¿—å’Œç›‘æ§

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**æœªæ‰¾åˆ°æ¨¡å¼**
- ç¡®ä¿æ‚¨å·²é€‰æ‹©æœ‰æ•ˆçš„è®¾è®¡å…ƒç´ 
- æ£€æŸ¥è®¾è®¡æ˜¯å¦éµå¾ªçº¦å®š
- å°è¯•å…ˆä½¿ç”¨å¯è§†åŒ–å™¨è§£æè®¾è®¡

**æ— æ•ˆçš„ä»£ç ç”Ÿæˆ**
- éªŒè¯æ‰€é€‰è¯­è¨€æ˜¯å¦å—æ”¯æŒ
- æ£€æŸ¥æ‚¨çš„é…ç½®è®¾ç½®
- æŸ¥çœ‹è®¾è®¡æ˜¯å¦å­˜åœ¨å‘½åçº¦å®šè¿è§„

**ç¼ºå°‘ä¾èµ–é¡¹**
- ç¡®ä¿å·²æ„å»ºå…±äº«åº“
- è¿è¡Œ `npm install` å®‰è£…ä¾èµ–é¡¹
- æ£€æŸ¥ TypeScript ç¼–è¯‘é”™è¯¯

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼š

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æ·»åŠ å¯¹æ–°è¯­è¨€/æ¡†æ¶çš„æ”¯æŒ
4. æ·»åŠ æµ‹è¯•
5. æäº¤æ‹‰å–è¯·æ±‚

## è®¸å¯è¯

MIT è®¸å¯è¯ - è¯¦è§ LICENSE æ–‡ä»¶

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜å’Œç–‘é—®ï¼š
- GitHub é—®é¢˜ï¼š[https://github.com/your-org/figma-postgres/issues](https://github.com/your-org/figma-postgres/issues)
- ç”µå­é‚®ä»¶ï¼š<admin@0379.email>

## æ›´æ–°æ—¥å¿—

### ç‰ˆæœ¬ 1.0.0
- åˆå§‹ç‰ˆæœ¬
- SQL ä»£ç ç”Ÿæˆ
- ORM æ”¯æŒï¼ˆPrismaã€TypeORMã€Sequelizeã€Drizzleï¼‰
- API ç”Ÿæˆï¼ˆExpressã€Fastifyã€NestJSã€Next.jsã€Honoï¼‰
- é…ç½®ç®¡ç†
- æ’ä»¶é›†æˆ

---

<div align="center">

> **YanYuCloudCube**
> **è¨€å¯è±¡é™ | è¯­æ¢æœªæ¥**
> **Words Initiate Quadrants, Language Serves as Core for Future**

> **ä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ**
> **All things converge in cloud pivot; Deep stacks ignite a new era of intelligence**

</div>
